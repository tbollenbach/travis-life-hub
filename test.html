<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travis Life Hub - Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">Travis Life Hub - System Test</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">System Status</h2>
                <div id="system-status" class="space-y-2">
                    <div class="flex justify-between">
                        <span>JavaScript Loaded:</span>
                        <span id="js-status" class="font-medium">Checking...</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Local Storage:</span>
                        <span id="storage-status" class="font-medium">Checking...</span>
                    </div>
                    <div class="flex justify-between">
                        <span>Status.json:</span>
                        <span id="status-json-status" class="font-medium">Checking...</span>
                    </div>
                </div>
            </div>

            <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                <h2 class="text-xl font-semibold text-gray-800 mb-4">Quick Test</h2>
                <div class="space-y-4">
                    <button onclick="testMoodLog()" class="w-full px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors">
                        Test Mood Log
                    </button>
                    <button onclick="testChanceLog()" class="w-full px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors">
                        Test Chance Log
                    </button>
                    <button onclick="testExport()" class="w-full px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors">
                        Test Export
                    </button>
                </div>
            </div>
        </div>

        <div class="mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-4">Current Status Data</h2>
            <pre id="status-display" class="bg-gray-100 p-4 rounded-lg text-sm overflow-auto max-h-64"></pre>
        </div>

        <div class="mt-6 text-center">
            <a href="index.html" class="inline-block px-6 py-3 bg-travis-blue text-white rounded-lg hover:bg-blue-600 transition-colors">
                Go to Main Dashboard
            </a>
        </div>
    </div>

    <script>
        // Test functions
        function testMoodLog() {
            const testData = {
                type: 'mood',
                timestamp: new Date().toISOString(),
                mood: 'good',
                energy: 7,
                notes: 'Test mood entry'
            };
            
            // Simulate logging
            const currentData = JSON.parse(localStorage.getItem('travis-life-hub-data') || '{"recent_activities": []}');
            currentData.recent_activities = [testData, ...currentData.recent_activities];
            currentData.mood = 'good';
            currentData.last_checkin = new Date().toISOString();
            
            localStorage.setItem('travis-life-hub-data', JSON.stringify(currentData));
            updateStatusDisplay();
            alert('Test mood log created!');
        }

        function testChanceLog() {
            const testData = {
                type: 'chance',
                timestamp: new Date().toISOString(),
                activity: 'walked',
                duration: 30,
                notes: 'Test walk'
            };
            
            // Simulate logging
            const currentData = JSON.parse(localStorage.getItem('travis-life-hub-data') || '{"recent_activities": []}');
            currentData.recent_activities = [testData, ...currentData.recent_activities];
            currentData.chance_status = 'walked for 30 minutes';
            currentData.last_checkin = new Date().toISOString();
            
            localStorage.setItem('travis-life-hub-data', JSON.stringify(currentData));
            updateStatusDisplay();
            alert('Test chance log created!');
        }

        function testExport() {
            const data = {
                status: JSON.parse(localStorage.getItem('travis-life-hub-status') || '{}'),
                fullData: JSON.parse(localStorage.getItem('travis-life-hub-data') || '{}'),
                exportDate: new Date().toISOString()
            };

            const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `travis-life-hub-test-export-${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('Test export completed!');
        }

        function updateStatusDisplay() {
            const status = JSON.parse(localStorage.getItem('travis-life-hub-status') || '{}');
            document.getElementById('status-display').textContent = JSON.stringify(status, null, 2);
        }

        // Check system status
        document.addEventListener('DOMContentLoaded', () => {
            // Check JavaScript
            document.getElementById('js-status').textContent = '✅ Loaded';
            document.getElementById('js-status').className = 'font-medium text-green-600';

            // Check localStorage
            try {
                localStorage.setItem('test', 'test');
                localStorage.removeItem('test');
                document.getElementById('storage-status').textContent = '✅ Available';
                document.getElementById('storage-status').className = 'font-medium text-green-600';
            } catch (e) {
                document.getElementById('storage-status').textContent = '❌ Not Available';
                document.getElementById('storage-status').className = 'font-medium text-red-600';
            }

            // Check status.json
            try {
                fetch('data/status.json')
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('status-json-status').textContent = '✅ Accessible';
                        document.getElementById('status-json-status').className = 'font-medium text-green-600';
                    })
                    .catch(() => {
                        document.getElementById('status-json-status').textContent = '⚠️ Local Only';
                        document.getElementById('status-json-status').className = 'font-medium text-yellow-600';
                    });
            } catch (e) {
                document.getElementById('status-json-status').textContent = '❌ Error';
                document.getElementById('status-json-status').className = 'font-medium text-red-600';
            }

            updateStatusDisplay();
        });
    </script>
</body>
</html> 